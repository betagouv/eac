<page-search>
  <section class=block>
    <h2>Résultats pour "{ opts.q }"</h2>

    <section id=filters>
      <h4>Types</h4>
      <span class=tag each={ type in opts.filters.type }>{ type }</span>
      </ul>
    </section>

    <poi-card each={ poi in results } data={ poi } maxlength=300 address></poi-card>

    <p if={ !results || !results.length }>Aucun résultat ne correspond à votre recherche.</p>

    <a class=button href=#>Retour à la recherche</a>
  </section>

  <script>
    let results = searchablePois.search(opts.q)
    const types = opts.filters.type
    if(types.length) {
      results = results.filter(result => result.Type.some(type => types.includes(type)))
    }
    this.results = results
  </script>

  <style scoped>
    poi-card {
      padding: 2rem;
      margin-bottom: 2rem;
      border-bottom: 1px solid #ddd;
    }

    #filters {
      margin-bottom: 2rem;
    }
    #filters h4 {
      display: inline-block;
      margin-right: 1rem;
      font-size: 2rem;
    }
  </style>
</page-search>
