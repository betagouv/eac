<app>
  <header class=block>
    <a href="/">
      <img id=logo src=/images/logo-eac.gif alt="Logo de la Plateforme EAC">
      <h1>Plateforme EAC</h1>
      <h2>L'Ã‰ducation artistique et culturelle pour tous</h2>
    </a>
  </header>

  <main>
    <page-school if={ this.page == 'school' }></page-school>
    <page-search if={ this.page == 'search' } q={ this.q } school-id={ this.schoolId }></page-search>
    <page-actor if={ this.page == 'actor' } actor-id={ this.actorId }></page-actor>
  </main>


  <script>
    this.page = ''

    this.showPage = (name) => {
      this.page = name
      this.update()
    }

    page('/', () => this.showPage('school'))

    page('/school/:school/search', (ctx) => {
      this.schoolId = ctx.params.school
      this.showPage('search')
    })
    page('/school/:school/search/:q/:filters', (ctx) => {
      this.q = ctx.params.q
      this.schoolId = ctx.params.school
      this.filters = JSON.parse(ctx.params.filters)
      this.showPage('search')
    })

    page('/school/:school/actor/:id', (ctx) => {
      this.schoolId = ctx.params.school
      this.actorId = ctx.params.id
      this.showPage('actor')
    })

    page()
    document.body.classList.add('ready')
  </script>


  <style scoped>
    header {
      padding: .5rem !important;
    }
    header > a {
      display: grid;
      grid-template:
        ". logo title ."
        ". logo baseline ."
        / 1fr 150px auto 1fr
        ;
      color: inherit;
    }
    header > a #logo {
      grid-area: logo;
    }
    header > a h1 {
      grid-area: title;
      font-size: 2em;
      margin: .4em 0 0 0;
      align-self: end;
    }
    header > a h2 {
      grid-area: baseline;
      font-size: 1em;
      font-weight: 200;
    }
  </style>
</app>
